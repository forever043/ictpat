{% extends "common/mgrbase.html" %}
{% load staticfiles %}


{% block csslink %}
{{ block.super }}
<link rel="stylesheet" href="{% static "css/jquery.dataTables.css" %}" type="text/css" media="screen" />
<link rel="stylesheet" href="{% static "css/bootstrap.btn.css" %}">
<style type="text/css">
.expanded-group{
	background: url("{% static "images/minus.jpg" %}") no-repeat scroll left center transparent;
	padding-left: 15px !important
}

.collapsed-group{
	background: url("{% static "images/plus.jpg" %}") no-repeat scroll left center transparent;
	padding-left: 15px !important
}

tr:hover td {
    background-color:#e0e0e0;
}

td.group {
    background-color: #d5eafd !important;
    border-bottom: 1px solid #94bafd;
    border-top: 1px solid #94bafd;
}

</style>
{% endblock %}


{% block scripts %}
{{ block.super }}
<script type="text/javascript" src="{% static "scripts/jquery.jeditable.mini.js" %}"></script>
<script type="text/javascript" src="{% static "scripts/jquery.dataTables.min.js" %}"></script>
<script type="text/javascript" src="{% static "scripts/jquery.dataTables.rowGrouping.js" %}"></script>
<script type="text/javascript" src="{% static "scripts/simpla.dataTables.configuration.js" %}"></script>

<script type="text/javascript">
$(document).ready(function() {
	var queryTable = $('#patent_package_detail').dataTable({
		"bSort": false,
        "bLengthChange": false,
        "bPaginate": false,
		"bFilter": false,
		"oLanguage": oLanguage
	}).rowGrouping({
		iGroupingColumnIndex:0,
		bExpandableGrouping: true,
        bExpandSingleGroup: false,
		asExpandedGroups: [""]
	});;
});
</script>
{% endblock %}

{% block main_content %}
			
			<!-- Page Head -->
			<h2>专利评价包详情</h2>
			<p id="page-intro">查看专利评价包信息详情</p>

			{% include 'common/notifymsg.html' %}

			<span class="btn btn-info" onclick="window.location.href='{% url "patent-package-list" %}'" style="margin-bottom:18px;"> 
				<i class="glyphicon glyphicon-backward"></i>
				<span>返回列表</span>
			</span>
			{% if patpkg.finish_date %}
			<span class="btn btn-success" onclick="window.location.href='{% url "patent-package-list" %}'" style="margin-bottom:18px;"> 
				<i class="glyphicon glyphicon-download"></i>
				<span>导出专利包</span>
			</span>
			{% else %}
			<span class="btn btn-success" onclick="window.location.href='{% url "patent-package-list" %}'" style="margin-bottom:18px;"> 
				<i class="glyphicon glyphicon-ok"></i>
				<span>完成专利包</span>
			</span>
			{% endif %}

			<div class="clear"></div>

			<div class="content-box column-left">
				<div class="content-box-header">
					<h3>专利评价包信息</h3>
					<div class="clear"></div>
				</div>
				<div class="content-box-content">
					<div class="tab-content default-tab" id="tab1" >
						<fieldset>
							<p>名称：{{ patpkg.name }}</p>
						</fieldset>
						<fieldset class="column-left">
							<p>提交时间：{{ patpkg.submit_date }}</p>
						</fieldset>
						<fieldset class="column-right">
							<p>完成时间：{% if patpkg.finish_date %}{{patpkg.finish_date}}{% else %}进行中{% endif %}</p>
						</fieldset>
						<fieldset>
							<p>专家列表：{% for expert in patpkg.expert_list %}{{ expert.last_name }}{{ expert.first_name }}&nbsp;&nbsp;{% endfor %}</p>
						</fieldset>
					</div>
				</div>
			</div>

			<div class="content-box column-right">
				<div class="content-box-header">
					<h3>专利评价包统计</h3>
					<div class="clear"></div>
				</div>
				<div class="content-box-content">
					<div class="tab-content default-tab" id="tab1" >
						<fieldset class="column-left">
							<p>专利数：{{ patpkg.patent_count }}</p>
						</fieldset>
						<fieldset class="column-right">
							<p>专家评分数：{{ patpkg.rating_total }}</p>
						</fieldset>
						<fieldset>
							<p>专家评分完成度：{{ patpkg.rating_finish }}/{{ patpkg.rating_total }}</p>
							<p>评级报告完成度：{{ patpkg.report_finish }}/{{ patpkg.report_total }}</p>
						</fieldset>
					</div>
				</div>
			</div>

			<div class="clear"></div>

			<div class="content-box">
				
				<div class="content-box-header">
					<h3>专利列表</h3>
					<div class="clear"></div>
				</div>
				
				<div class="content-box-content">

					<div class="tab-content{% if not extmode %} default-tab{% endif %}" id="tab1" >

						<table id="patent_package_detail" class="datatable">
							<thead>
							<tr>
								<th width="0">专利名称</th>
								<th width="15%">评审专家</th>
								<th width="10%">状态</th>
								<th width="10%">专利评分</th>
								<th width="35%">专利评价</th>
								<th width="10%">提交时间</th>
								<th width="10%">操作</th>
							</tr>
							</thead>
							<tbody>
							{% for o in rating_list %}
							<tr>
								<td>
									&nbsp;({{ o.patent.rating_finish }}/{{ o.patent.rating_total }})&nbsp;&nbsp;{{ o.patent.patent.name }}
									<span style="float:right;"><a href="#">撰写评级报告</a></span>
								</td>
								<td>{{ o.expert.last_name }}{{ o.expert.first_name}}</td>
								<td>{% if o.submit_date %}已完成{% else %}进行中{% endif %}</td>
								<td>{% if o.rank %}{{ o.rank }}{% else %}----{% endif %}</td>
								<td>{% if o.remark %}{{ o.remark }}{% else %}----{% endif %}</td>
								<td>{% if o.submit_date %}{{ o.submit_date }}{% else %}----{% endif %}</td>
								<td><a href="{% url 'patent-package-detail' o.pk %}" title="更换专家"><img src="/resources/images/icons/hammer_screwdriver.png" alt="更换专家" />更换专家</a></td>
							</tr>
							{% endfor %}
							</tbody>
						</table>

						<br />
						<div class="clear"></div>

					</div>
				</div>
			</div>
						
{% endblock %}

